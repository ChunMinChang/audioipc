From 8c6da37701d6d116c9559b8e278f19a567497227 Mon Sep 17 00:00:00 2001
From: Dan Glastonbury <dan.glastonbury@gmail.com>
Date: Fri, 11 Aug 2017 12:41:35 +1000
Subject: Bug XXX - P5: Compile in audioipc crates

MozReview-Commit-ID: 6BC0fu1rrEE

diff --git a/toolkit/library/gtest/rust/Cargo.toml b/toolkit/library/gtest/rust/Cargo.toml
index c9f942c..820f1d8 100644
--- a/toolkit/library/gtest/rust/Cargo.toml
+++ b/toolkit/library/gtest/rust/Cargo.toml
@@ -5,21 +5,22 @@ authors = ["nobody@mozilla.org"]
 license = "MPL-2.0"
 description = "Testing code for libgkrust"
 
+[dependencies]
+mp4parse-gtest = { path = "../../../../dom/media/gtest" }
+nsstring-gtest = { path = "../../../../xpcom/rust/nsstring/gtest" }
+gkrust-shared = { path = "../../rust/shared" }
+
 [features]
 bindgen = ["gkrust-shared/bindgen"]
 servo = ["gkrust-shared/servo"]
 quantum_render = ["gkrust-shared/quantum_render"]
+cubeb-remoting = ["gkrust-shared/cubeb-remoting"]
 cubeb_pulse_rust = ["gkrust-shared/cubeb_pulse_rust"]
 gecko_debug = ["gkrust-shared/gecko_debug"]
 simd-accel = ["gkrust-shared/simd-accel"]
 no-static-ideograph-encoder-tables = ["gkrust-shared/no-static-ideograph-encoder-tables"]
 # parallel-utf8 = ["gkrust-shared/parallel-utf8"]
 
-[dependencies]
-mp4parse-gtest = { path = "../../../../dom/media/gtest" }
-nsstring-gtest = { path = "../../../../xpcom/rust/nsstring/gtest" }
-gkrust-shared = { path = "../../rust/shared" }
-
 [lib]
 path = "lib.rs"
 crate-type = ["staticlib"]
diff --git a/toolkit/library/rust/shared/Cargo.toml b/toolkit/library/rust/shared/Cargo.toml
index 7554cd4..fd2a9e4 100644
--- a/toolkit/library/rust/shared/Cargo.toml
+++ b/toolkit/library/rust/shared/Cargo.toml
@@ -15,6 +15,8 @@ webrender_bindings = { path = "../../../../gfx/webrender_bindings", optional = t
 cubeb-pulse = { path = "../../../../media/libcubeb/cubeb-pulse-rs", optional = true, features=["pulse-dlopen"] }
 encoding_c = "0.7.1"
 encoding_glue = { path = "../../../../intl/encoding_glue" }
+audioipc-client = { path = "../../../../media/audioipc/client" }
+audioipc-server = { path = "../../../../media/audioipc/server" }
 
 [features]
 default = []
diff --git a/toolkit/library/rust/shared/lib.rs b/toolkit/library/rust/shared/lib.rs
index e5b5b20..a2d40c3 100644
--- a/toolkit/library/rust/shared/lib.rs
+++ b/toolkit/library/rust/shared/lib.rs
@@ -15,6 +15,8 @@ extern crate webrender_bindings;
 extern crate cubeb_pulse;
 extern crate encoding_c;
 extern crate encoding_glue;
+extern crate audioipc_client;
+extern crate audioipc_server;
 
 use std::boxed::Box;
 use std::ffi::CStr;
-- 
2.10.2

